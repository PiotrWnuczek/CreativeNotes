(this.webpackJsonpcreativenotes=this.webpackJsonpcreativenotes||[]).push([[0],{446:function(e,t,n){"use strict";n.r(t);var a=n(9),r=n(0),c=n(40),s=n.n(c),i=n(11),o=n(27),l=n(19),u=n(80),j=n(83);n(447),n(448),n(438);j.a.initializeApp({apiKey:"AIzaSyDvLL7AqMJaIw5Jg6CrhfEzqnRBP_1CuKw",authDomain:"creativenotes-db.firebaseapp.com",projectId:"creativenotes-db",storageBucket:"creativenotes-db.appspot.com",messagingSenderId:"669244173601",appId:"1:669244173601:web:0d75ce398768507e172260",measurementId:"G-98Y15KYD5G"}),j.a.analytics(),j.a.firestore().settings({timestampsInSnapshots:!0});var b,d,p,h,O,m,x,f,g=j.a,y={error:null},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGNIN_SUCCESS":return console.log("signin success"),Object(a.a)(Object(a.a)({},e),{},{error:null});case"SIGNIN_ERROR":return console.log("signin error"),Object(a.a)(Object(a.a)({},e),{},{error:t.err.message});case"SIGNUP_SUCCESS":return console.log("signup success"),Object(a.a)(Object(a.a)({},e),{},{error:null});case"SIGNUP_ERROR":return console.log("signup error"),Object(a.a)(Object(a.a)({},e),{},{error:t.err.message});case"SIGNOUT_SUCCESS":return console.log("signout success"),e;default:return e}},C={notes:[]},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_SUCCESS":return console.log(t.data),e;case"CREATE_ERROR":return console.log(t.err),e;case"UPDATE_SUCCESS":return console.log(t.data),e;case"UPDATE_ERROR":return console.log(t.err),e;case"REMOVE_SUCCESS":return console.log(t.id),e;case"REMOVE_ERROR":return console.log(t.err),e;default:return e}},N=Object(l.c)({auth:v,note:S,firebase:o.firebaseReducer,firestore:u.firestoreReducer}),E=n(248),R=n(28),I=n(29),w=n(23),F=n(12),U=n(450),_=n(451),k=n(454),A=n(456),G=n(2),P=Object(i.b)((function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}}),(function(e){return{signout:function(){return e((function(e,t,n){(0,n.getFirebase)().auth().signOut().then((function(){e({type:"SIGNOUT_SUCCESS"})}))}))}}}))((function(e){var t=e.signout,n=e.auth,a=e.profile;return Object(G.jsx)(k.a,{bg:"light",expand:"lg",children:Object(G.jsxs)(U.a,{children:[Object(G.jsx)(k.a.Brand,{as:w.b,to:"/",children:"CreativeNootebook"}),Object(G.jsx)(k.a.Toggle,{}),Object(G.jsxs)(k.a.Collapse,{className:"justify-content-end",children:[Object(G.jsxs)(A.a,{className:"mx-lg-3",children:[!n.uid&&Object(G.jsx)(A.a.Link,{as:w.c,to:"/signup",children:"Sign Up"}),!n.uid&&Object(G.jsx)(A.a.Link,{as:w.c,to:"/signin",children:"Sign In"}),n.uid&&Object(G.jsx)(A.a.Link,{as:w.c,to:"/create",children:"New Note"}),n.uid&&Object(G.jsx)(A.a.Link,{onClick:t,children:"Sign Out"})]}),n.uid&&Object(G.jsx)(_.a,{as:w.c,to:"/",children:a.initials})]})]})})})),L=n(452),T=n(245),D=n(111),V=n.n(D),z=n(457),B=function(e){var t=e.note;return Object(G.jsx)(z.a,{className:"m-4",children:Object(G.jsxs)(z.a.Body,{children:[Object(G.jsx)(z.a.Title,{children:t.title}),Object(G.jsxs)(z.a.Subtitle,{children:["Created by: ",t.firstname," ",t.lastname]}),Object(G.jsxs)(z.a.Text,{children:["Created at: ",V()(t.createdat.toDate()).calendar()]})]})})},M=I.b.div(b||(b=Object(R.a)(["\n  text-align: center;\n"]))),J=I.b.h1(d||(d=Object(R.a)(["\n  font-size: 1.5rem;\n  text-transform: uppercase;\n  margin: 2rem;\n"]))),K=function(e){var t=e.personal;return t?Object(G.jsxs)(M,{className:"p-4",children:[Object(G.jsx)(J,{children:"Personal Notes"}),t&&t.map((function(e){return Object(G.jsx)(w.b,{to:"/personal/"+e.id,className:"text-reset text-decoration-none",children:Object(G.jsx)(B,{note:e})},e.id)}))]}):Object(G.jsx)("p",{className:"text-center",children:"loading..."})},q=I.b.div(p||(p=Object(R.a)(["\n  text-align: center;\n"]))),W=I.b.h1(h||(h=Object(R.a)(["\n  font-size: 1.5rem;\n  text-transform: uppercase;\n  margin: 2rem;\n"]))),Y=function(e){var t=e.social;return t?Object(G.jsxs)(q,{className:"p-4",children:[Object(G.jsx)(W,{children:"Social Notes"}),t&&t.map((function(e){return Object(G.jsx)(w.b,{to:"/social/"+e.id,className:"text-reset text-decoration-none",children:Object(G.jsx)(B,{note:e})},e.id)}))]}):Object(G.jsx)("p",{className:"text-center",children:"loading..."})},H=Object(l.d)(Object(i.b)((function(e){return{personal:e.firestore.ordered.personal,social:e.firestore.ordered.social,auth:e.firebase.auth}})),Object(o.firestoreConnect)((function(e){return[{collection:"users",doc:e.auth.uid,subcollections:[{collection:"notes"}],orderBy:["createdat","desc"],storeAs:"personal"},{collection:"notes",orderBy:["createdat","desc"],storeAs:"social"}]})))((function(e){var t=e.personal,n=e.social;return Object(G.jsxs)(L.a,{className:"m-0",children:[Object(G.jsx)(T.a,{md:6,children:Object(G.jsx)(K,{personal:t})}),Object(G.jsx)(T.a,{md:6,children:Object(G.jsx)(Y,{social:n})})]})})),Q=function(e,t){return function(n,r,c){var s=(0,c.getFirestore)(),i=r().firebase.auth.uid,o=s.collection("users").doc(i).collection("notes"),l=s.collection("notes");("personal"===e.type?o:l).doc(t).update(Object(a.a)({},e)).then((function(){n({type:"UPDATE_SUCCESS",data:e})})).catch((function(e){n({type:"UPDATE_ERROR",err:e})}))}},X=n(455),Z=n(33),$=I.b.h1(O||(O=Object(R.a)(["\n  font-size: 1.5rem;\n  text-transform: uppercase;\n  margin: 2rem 0;\n"]))),ee=Object(i.b)(null,(function(e){return{create:function(t){return e(function(e){return function(t,n,r){var c=(0,r.getFirestore)(),s=n().firebase.auth.uid,i=n().firebase.profile,o=c.collection("users").doc(s).collection("notes"),l=c.collection("notes");("personal"===e.type?o:l).add(Object(a.a)(Object(a.a)({},e),{},{firstname:i.firstname,lastname:i.lastname,authorid:s,createdat:new Date})).then((function(){t({type:"CREATE_SUCCESS",data:e})})).catch((function(e){t({type:"CREATE_ERROR",err:e})}))}}(t))}}}))((function(e){var t=e.create,n=e.history;return Object(G.jsxs)(U.a,{className:"py-4",children:[Object(G.jsx)($,{children:"Create new note"}),Object(G.jsx)(Z.a,{initialValues:{title:"",description:"",type:"personal"},onSubmit:function(e,r){var c=r.resetForm;t(Object(a.a)(Object(a.a)({},e),{},{content:[]})),c(),n.push("/")},children:function(e){var t=e.values,n=e.handleChange,a=e.handleSubmit;return Object(G.jsxs)(X.a,{onSubmit:a,autoComplete:"off",children:[Object(G.jsxs)(X.a.Group,{className:"mb-3",children:[Object(G.jsx)(X.a.Label,{children:"Note Title"}),Object(G.jsx)(X.a.Control,{type:"text",name:"title",placeholder:"title",onChange:n,value:t.title})]}),Object(G.jsxs)(X.a.Group,{className:"mb-3",children:[Object(G.jsx)(X.a.Label,{children:"Note Description"}),Object(G.jsx)(X.a.Control,{type:"text",name:"description",placeholder:"description",as:"textarea",rows:7,onChange:n,value:t.description})]}),Object(G.jsxs)(X.a.Group,{className:"mb-3",children:[Object(G.jsx)(X.a.Check,{inline:!0,type:"radio",name:"type",id:"personal",label:"personal",value:"personal",onChange:n}),Object(G.jsx)(X.a.Check,{inline:!0,type:"radio",name:"type",id:"social",label:"social",value:"social",onChange:n})]}),Object(G.jsx)(_.a,{variant:"secondary",type:"submit",children:"Create"})]})}})]})})),te=n(56),ne=n(249),ae=n(41),re=n(453),ce=n(117),se=n(82),ie=function(e){var t=e.item,n=e.idx,a=e.updateItem,c=e.deleteItem,s=Object(r.useState)(!1),i=Object(te.a)(s,2),o=i[0],l=i[1];return Object(G.jsx)("div",{children:o?Object(G.jsx)(Z.a,{initialValues:{content:t.content},onSubmit:function(e,t){var r=t.resetForm;a(e,n),l(!1),r()},children:function(e){var t=e.values,n=e.handleChange,a=e.handleSubmit;return Object(G.jsx)(X.a,{onSubmit:a,autoComplete:"off",children:Object(G.jsxs)(re.a,{className:"mb-3",children:[Object(G.jsx)(X.a.Control,{autoFocus:!0,type:"text",name:"content",placeholder:"content",onChange:n,value:t.content}),Object(G.jsx)(_.a,{variant:"outline-secondary",type:"submit",children:"Save"})]})})}}):Object(G.jsxs)("h5",{className:"m-0 pb-2",children:["text"===t.type&&Object(G.jsx)(ae.a,{}),"todo"===t.type&&Object(G.jsx)(ae.d,{onClick:function(){return a({type:"done"},n)},className:"pointer"}),"done"===t.type&&Object(G.jsx)(ae.c,{onClick:function(){return a({type:"todo"},n)},className:"pointer"}),Object(G.jsx)("span",{className:"mx-2",children:t.content}),Object(G.jsx)(ae.b,{onClick:function(){return l(!0)},className:"pb-1 mx-2 pointer"}),Object(G.jsx)(ae.e,{onClick:function(){return c(n)},className:"pb-1 mx-2 pointer"})]})})},oe=Object(i.b)(null,(function(e){return{update:function(t,n){return e(Q(t,n))}}}))((function(e){var t=e.content,n=e.type,c=e.id,s=e.update,i=Object(r.useState)(Object(ce.a)(t)),o=Object(te.a)(i,2),l=o[0],u=o[1];Object(r.useEffect)((function(){u(Object(ce.a)(t))}),[t]);var j=function(e,r){s({content:t.map((function(t,n){return n===r?Object(a.a)(Object(a.a)({},t),e):t})),type:n},c)},b=function(e){s({content:t.filter((function(t,n){return n!==e})),type:n},c)};return Object(G.jsxs)("div",{children:[Object(G.jsx)(Z.a,{initialValues:{content:"",type:"text"},onSubmit:function(e,a){var r=a.resetForm;s({content:[].concat(Object(ce.a)(t),[e]),type:n},c),r()},children:function(e){var t=e.values,n=e.handleChange,a=e.handleSubmit;return Object(G.jsx)(X.a,{onSubmit:a,autoComplete:"off",children:Object(G.jsxs)(re.a,{children:[Object(G.jsx)(X.a.Control,{type:"text",name:"content",placeholder:"content",as:"textarea",rows:2,onChange:n,value:t.content}),Object(G.jsx)(_.a,{onClick:function(){return t.type="text"},variant:"outline-secondary",type:"submit",children:"Add Text"}),Object(G.jsx)(_.a,{onClick:function(){return t.type="todo"},variant:"outline-secondary",type:"submit",children:"Add Todo"})]})})}}),Object(G.jsx)("br",{}),Object(G.jsx)(se.a,{onDragEnd:function(e){if(e.destination){var t=l,a=t.splice(e.source.index,1),r=Object(te.a)(a,1)[0];t.splice(e.destination.index,0,r),u(t),s({content:t,type:n},c)}},children:Object(G.jsx)(se.c,{droppableId:"droppable",children:function(e){return Object(G.jsxs)("div",Object(a.a)(Object(a.a)({},e.droppableProps),{},{ref:e.innerRef,children:[l.map((function(e,t){return Object(G.jsx)(se.b,{draggableId:e.content,index:t,children:function(n){return Object(G.jsx)("div",Object(a.a)(Object(a.a)(Object(a.a)({ref:n.innerRef},n.draggableProps),n.dragHandleProps),{},{children:Object(G.jsx)(ie,{idx:t,item:e,updateItem:j,deleteItem:b},t)}))}},e.content)})),e.placeholder]}))}})})]})})),le=["note","update","remove","history"],ue=Object(l.d)(Object(i.b)((function(e,t){var n=t.match.params.type,a=t.match.params.id,r=e.firestore.data.personal,c=e.firestore.data.social;return"personal"===n?{auth:e.firebase.auth,note:r&&r[a]}:{auth:e.firebase.auth,note:c&&c[a]}}),(function(e){return{update:function(t,n){return e(Q(t,n))},remove:function(t,n){return e(function(e,t){return function(n,a,r){var c=(0,r.getFirestore)(),s=a().firebase.auth.uid,i=c.collection("users").doc(s).collection("notes"),o=c.collection("notes");("personal"===e.type?i:o).doc(t).delete().then((function(){n({type:"REMOVE_SUCCESS",id:t})})).catch((function(e){n({type:"REMOVE_SUCCESS",err:e})}))}}(t,n))}}})),Object(o.firestoreConnect)((function(e){return[{collection:"users",doc:e.auth.uid,subcollections:[{collection:"notes"}],storeAs:"personal"},{collection:"notes",storeAs:"social"}]})))((function(e){var t=e.note,n=e.update,c=e.remove,s=e.history,i=Object(ne.a)(e,le).match.params.id,o=Object(r.useState)(!1),l=Object(te.a)(o,2),u=l[0],j=l[1];return t?Object(G.jsxs)(U.a,{className:"py-4",children:["title"===u?Object(G.jsx)(Z.a,{initialValues:{title:t.title},onSubmit:function(e,r){var c=r.resetForm;n(Object(a.a)(Object(a.a)({},e),{},{type:t.type}),i),j(!1),c()},children:function(e){var t=e.values,n=e.handleChange,a=e.handleSubmit;return Object(G.jsx)(X.a,{onSubmit:a,autoComplete:"off",children:Object(G.jsxs)(re.a,{className:"mb-3",children:[Object(G.jsx)(X.a.Control,{autoFocus:!0,type:"text",name:"title",placeholder:"title",onChange:n,value:t.title}),Object(G.jsx)(_.a,{variant:"outline-secondary",type:"submit",children:"Save"})]})})}}):Object(G.jsxs)("h1",{children:[t.title,Object(G.jsx)(ae.b,{onClick:function(){return j("title")},className:"pb-2 mx-2 pointer"})]}),"description"===u?Object(G.jsx)(Z.a,{initialValues:{description:t.description},onSubmit:function(e,r){var c=r.resetForm;n(Object(a.a)(Object(a.a)({},e),{},{type:t.type}),i),j(!1),c()},children:function(e){var t=e.values,n=e.handleChange,a=e.handleSubmit;return Object(G.jsx)(X.a,{onSubmit:a,autoComplete:"off",children:Object(G.jsxs)(re.a,{className:"mb-3",children:[Object(G.jsx)(X.a.Control,{autoFocus:!0,type:"text",name:"description",placeholder:"description",onChange:n,value:t.description}),Object(G.jsx)(_.a,{variant:"outline-secondary",type:"submit",children:"Save"})]})})}}):Object(G.jsxs)("h3",{children:[t.description,Object(G.jsx)(ae.b,{onClick:function(){return j("description")},className:"pb-2 mx-2 pointer"})]}),Object(G.jsxs)("h5",{children:[t.firstname," ",t.lastname," | ",V()(t.createdat.toDate()).calendar()]}),Object(G.jsx)("hr",{}),Object(G.jsx)(oe,{id:i,type:t.type,content:t.content}),Object(G.jsxs)("div",{className:"my-3",children:[Object(G.jsx)(_.a,{variant:"secondary",onClick:function(){return s.push("/")},children:"Close"})," "," ",Object(G.jsx)(_.a,{variant:"secondary",onClick:function(){c({type:t.type},i),s.push("/")},children:"Delete"})]})]}):Object(G.jsx)("p",{className:"text-center",children:"loading..."})})),je=function(e){var t=Object.assign({},e),n=Object(i.c)((function(e){return e.firebase.auth}));return Object(o.isLoaded)(n)&&!Object(o.isEmpty)(n)?Object(G.jsx)(F.b,Object(a.a)({},t)):Object(G.jsx)(F.a,{to:"/signin"})},be=I.b.h1(m||(m=Object(R.a)(["\n  font-size: 1.5rem;\n  text-transform: uppercase;\n  margin: 2rem 0;\n"]))),de=Object(i.b)((function(e){return{error:e.auth.error,auth:e.firebase.auth}}),(function(e){return{signin:function(t){return e(function(e){return function(t,n,a){(0,a.getFirebase)().auth().signInWithEmailAndPassword(e.email,e.password).then((function(){t({type:"SIGNIN_SUCCESS"})})).catch((function(e){t({type:"SIGNIN_ERROR",err:e})}))}}(t))}}}))((function(e){var t=e.signin,n=e.error;return e.auth.uid?Object(G.jsx)(F.a,{to:"/"}):Object(G.jsxs)(U.a,{className:"py-4",children:[Object(G.jsx)(be,{children:"Sign In"}),Object(G.jsx)(Z.a,{initialValues:{email:"",password:""},onSubmit:function(e,n){var a=n.resetForm;t(e),a()},children:function(e){var t=e.values,a=e.handleChange,r=e.handleSubmit;return Object(G.jsxs)(X.a,{onSubmit:r,autoComplete:"off",children:[Object(G.jsxs)(X.a.Group,{className:"mb-3",children:[Object(G.jsx)(X.a.Label,{children:"Email"}),Object(G.jsx)(X.a.Control,{type:"email",name:"email",placeholder:"email",onChange:a,value:t.email})]}),Object(G.jsxs)(X.a.Group,{className:"mb-3",children:[Object(G.jsx)(X.a.Label,{children:"Password"}),Object(G.jsx)(X.a.Control,{type:"password",name:"password",placeholder:"password",onChange:a,value:t.password})]}),Object(G.jsx)(_.a,{variant:"secondary",type:"submit",children:"Sign In"}),n&&Object(G.jsx)("p",{className:"text-danger my-2",children:n})]})}})]})})),pe=I.b.h1(x||(x=Object(R.a)(["\n  font-size: 1.5rem;\n  text-transform: uppercase;\n  margin: 2rem 0;\n"]))),he=Object(i.b)((function(e){return{error:e.auth.error,auth:e.firebase.auth}}),(function(e){return{signup:function(t){return e(function(e){return function(t,n,a){var r=a.getFirebase,c=a.getFirestore,s=r(),i=c();s.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(t){return i.collection("users").doc(t.user.uid).set({firstname:e.firstname,lastname:e.lastname,initials:e.firstname[0]+e.lastname[0]})})).then((function(){t({type:"SIGNUP_SUCCESS"})})).catch((function(e){t({type:"SIGNUP_ERROR",err:e})}))}}(t))}}}))((function(e){var t=e.signup,n=e.error;return e.auth.uid?Object(G.jsx)(F.a,{to:"/"}):Object(G.jsxs)(U.a,{className:"py-4",children:[Object(G.jsx)(pe,{children:"Sign Up"}),Object(G.jsx)(Z.a,{initialValues:{email:"",password:"",firstname:"",lastname:""},onSubmit:function(e,n){var a=n.resetForm;t(e),a()},children:function(e){var t=e.values,a=e.handleChange,r=e.handleSubmit;return Object(G.jsxs)(X.a,{onSubmit:r,autoComplete:"off",children:[Object(G.jsxs)(X.a.Group,{className:"mb-3",children:[Object(G.jsx)(X.a.Label,{children:"Email"}),Object(G.jsx)(X.a.Control,{type:"email",name:"email",placeholder:"email",onChange:a,value:t.email})]}),Object(G.jsxs)(X.a.Group,{className:"mb-3",children:[Object(G.jsx)(X.a.Label,{children:"Password"}),Object(G.jsx)(X.a.Control,{type:"password",name:"password",placeholder:"password",onChange:a,value:t.password})]}),Object(G.jsxs)(X.a.Group,{className:"mb-3",children:[Object(G.jsx)(X.a.Label,{children:"First Name"}),Object(G.jsx)(X.a.Control,{type:"text",name:"firstname",placeholder:"firstname",onChange:a,value:t.firstname})]}),Object(G.jsxs)(X.a.Group,{className:"mb-3",children:[Object(G.jsx)(X.a.Label,{children:"Last Name"}),Object(G.jsx)(X.a.Control,{type:"text",name:"lastname",placeholder:"lastname",onChange:a,value:t.lastname})]}),Object(G.jsx)(_.a,{variant:"secondary",type:"submit",children:"Sign Up"}),n&&Object(G.jsx)("p",{className:"text-danger my-2",children:n})]})}})]})})),Oe=(n(445),Object(I.a)(f||(f=Object(R.a)(["\n  body {\n    margin: 0; padding: 0;\n    font-family: 'Lato';\n    overflow-x: hidden;\n  }\n  .pointer {\n    cursor: pointer;\n  }\n"])))),me=function(){return Object(G.jsxs)(w.a,{basename:"/CreativeNotes",children:[Object(G.jsx)(Oe,{}),Object(G.jsx)(P,{}),Object(G.jsxs)(F.d,{children:[Object(G.jsx)(je,{exact:!0,path:"/",component:H}),Object(G.jsx)(je,{path:"/create",component:ee}),Object(G.jsx)(je,{path:"/:type/:id",component:ue}),Object(G.jsx)(F.b,{path:"/signin",component:de}),Object(G.jsx)(F.b,{path:"/signup",component:he})]})]})},xe=Object(l.e)(N,Object(l.d)(Object(l.a)(E.a.withExtraArgument({getFirebase:o.getFirebase,getFirestore:u.getFirestore})))),fe={firebase:g,config:{userProfile:"users",useFirestoreForProfile:!0,attachAuthIsReady:!0},dispatch:xe.dispatch,createFirestoreInstance:u.createFirestoreInstance},ge=function(e){var t=e.children,n=Object(i.c)((function(e){return e.firebase.auth}));return Object(o.isLoaded)(n)?t:Object(G.jsx)("p",{className:"text-center",children:"loading..."})};s.a.render(Object(G.jsx)(o.ReactReduxFirebaseProvider,Object(a.a)(Object(a.a)({},fe),{},{children:Object(G.jsx)(i.a,{store:xe,children:Object(G.jsx)(ge,{children:Object(G.jsx)(me,{})})})})),document.getElementById("root"))}},[[446,1,2]]]);
//# sourceMappingURL=main.3cfe659b.chunk.js.map